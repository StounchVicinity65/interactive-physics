let angleInput, speedInput;
let projectile;
let path = [];

function setup() {
  createCanvas(windowWidth - 240, windowHeight);
  angleInput = document.getElementById('angle');
  speedInput = document.getElementById('speed');
}

function launchProjectile() {
  let angle = radians(float(angleInput.value));
  let speed = float(speedInput.value);
  projectile = {
    x: 50,
    y: height - 50,
    vx: speed * cos(angle),
    vy: -speed * sin(angle),
    t: 0
  };
  path = []; // reset trail
}

function draw() {
  background(230);

  // Ground
  fill(120, 200, 120);
  rect(0, height - 40, width, 40);

  if (projectile) {
    projectile.t += 0.1;
    let x = projectile.x + projectile.vx * projectile.t;
    let y = projectile.y + projectile.vy * projectile.t + 0.5 * 9.8 * sq(projectile.t);

    // Add current position to trail
    path.push({x, y});

    // Draw trail
    stroke(255, 100, 0);
    noFill();
    beginShape();
    for (let pt of path) {
      vertex(pt.x, pt.y);
    }
    endShape();

    // Draw projectile
    noStroke();
    fill(255, 0, 0);
    ellipse(x, y, 30);
  }
}

